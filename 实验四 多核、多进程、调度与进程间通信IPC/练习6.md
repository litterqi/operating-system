# 答案解读：
相关函数位于oslab4\kernel\object\thread.c中
## sys_set_affinity()
```
thread->thread_ctx->affinity = aff;
```
这行代码将传入的亲和性参数赋值给线程的thread_ctx结构体中的affinity成员，即设置线程的亲和性。
## sys_get_affinity()
```
aff = thread->thread_ctx->affinity;
```
这行代码将线程对象中的thread_ctx结构体中的affinity成员赋值给变量aff，即获取线程的亲和性。
## 增加线程的亲和性支持
在`rr_sched_enqueue()`函数(oslab4\kernel\sched\policy_rr.c中)中增加对于线程亲和性的检查。即将
```
cpu_id = smp_get_cpu_id();
```
改为
```
if (thread->thread_ctx->affinity == NO_AFF)
        cpu_id = smp_get_cpu_id();
else
        cpu_id = thread->thread_ctx->affinity;
```
访问线程对象thread的thread_ctx结构体中的affinity成员，即线程的亲和性。

如果线程的亲和性等于NO_AFF，表示线程没有指定特定的亲和性，因此调用`smp_get_cpu_id()`函数获取当前CPU ID，并将其赋值给变量cpu_id。

如果线程的亲和性不是NO_AFF，则将线程的亲和性赋值给变量cpu_id。

最终，变量cpu_id将表示线程应该在的CPU ID。
